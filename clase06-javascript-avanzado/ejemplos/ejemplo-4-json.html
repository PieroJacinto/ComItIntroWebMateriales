<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo 4: JSON - Clase 6</title>
    <link rel="stylesheet" href="./ejemplo-4-json.css">
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>üìÑ JSON en JavaScript</h1>
            <p>Aprende qu√© es JSON, para qu√© sirve, y c√≥mo convertir entre objetos JavaScript y texto JSON</p>
        </div>

        <!-- DEMO 1: ¬øQU√â ES JSON? -->
        <div class="demo-section">
            <h2>ü§î Demo 1: ¬øQu√© es JSON?</h2>
            <p><strong>JSON</strong> = <strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation</p>
            <p>Es un <em>formato de texto</em> para intercambiar datos entre aplicaciones, especialmente con APIs.</p>
            
            <div class="info-box">
                <h3>üí° JSON es como un "idioma universal" para datos:</h3>
                <ul>
                    <li>‚úÖ <strong>Frontend ‚Üî Backend:</strong> Tu sitio web habla con el servidor</li>
                    <li>‚úÖ <strong>APIs:</strong> Datos de clima, noticias, redes sociales</li>
                    <li>‚úÖ <strong>Bases de datos:</strong> Guardar y leer informaci√≥n</li>
                    <li>‚úÖ <strong>Archivos:</strong> Configuraciones y datos</li>
                </ul>
            </div>

            <div class="code-block">// OBJETO JAVASCRIPT (en memoria)
let usuario = {
    nombre: "Ana",
    edad: 25,
    activo: true
};

// TEXTO JSON (se puede enviar/guardar)
let usuarioJSON = `{
    "nombre": "Ana",
    "edad": 25,
    "activo": true
}`;</div>

            <div class="demo-controls">
                <button class="btn" onclick="demo1()">ü§î Ver Diferencia JS vs JSON</button>
            </div>

            <div class="console-output" id="output1">Presiona el bot√≥n para ver el resultado...</div>
        </div>

        <!-- DEMO 2: JSON.stringify() -->
        <div class="demo-section">
            <h2>üì§ Demo 2: JSON.stringify() - JS a JSON</h2>
            <p><strong>JSON.stringify()</strong> convierte objetos JavaScript a texto JSON para enviar o guardar.</p>
            
            <div class="code-block">// Convertir objeto a JSON
let producto = {
    nombre: "Laptop",
    precio: 1200,
    disponible: true
};

let productoJSON = JSON.stringify(producto);
console.log(typeof producto);     // "object"
console.log(typeof productoJSON); // "string"

// Con formato bonito
let formatoBonito = JSON.stringify(producto, null, 2);</div>

            <div class="demo-controls">
                <button class="btn" onclick="demo2()">üì§ Probar JSON.stringify()</button>
            </div>

            <div class="console-output" id="output2">Presiona el bot√≥n para ver el resultado...</div>
            <div class="json-display" id="json2">Aqu√≠ aparecer√° el JSON generado...</div>
        </div>

        <!-- DEMO 3: JSON.parse() -->
        <div class="demo-section">
            <h2>üì• Demo 3: JSON.parse() - JSON a JS</h2>
            <p><strong>JSON.parse()</strong> convierte texto JSON de vuelta a objetos JavaScript para usar en tu c√≥digo.</p>
            
            <div class="code-block">// Recibir datos JSON (como de una API)
let climaTexto = `{
    "ciudad": "Buenos Aires",
    "temperatura": 25,
    "clima": "soleado"
}`;

// Convertir a objeto JS para usar
let clima = JSON.parse(climaTexto);
console.log(clima.ciudad);      // "Buenos Aires"
console.log(clima.temperatura); // 25</div>

            <div class="demo-controls">
                <button class="btn btn-secondary" onclick="demo3()">üì• Probar JSON.parse()</button>
            </div>

            <div class="console-output" id="output3">Presiona el bot√≥n para ver el resultado...</div>
        </div>

        <!-- DEMO 4: CASOS PR√ÅCTICOS -->
        <div class="demo-section">
            <h2>üéØ Demo 4: Casos Pr√°cticos en tu Proyecto</h2>
            <p>Ejemplos reales de c√≥mo usar√°s JSON en tu sitio web:</p>
            
            <div class="code-block">// Perfil de usuario para tu portfolio
let perfil = {
    nombre: "Ana Garc√≠a",
    profesion: "Desarrolladora Frontend",
    skills: ["HTML", "CSS", "JavaScript"],
    proyectos: [
        { nombre: "Portfolio", completado: true },
        { nombre: "Blog", completado: false }
    ]
};

// Convertir a JSON para guardar
let perfilJSON = JSON.stringify(perfil, null, 2);</div>

            <div class="demo-controls">
                <button class="btn" onclick="demo4()">üéØ Ver Casos Pr√°cticos</button>
            </div>

            <div class="console-output" id="output4">Presiona el bot√≥n para ver el resultado...</div>
        </div>

        <!-- DEMO 5: ERRORES COMUNES -->
        <div class="demo-section">
            <h2>üö® Demo 5: Errores Comunes</h2>
            
            <div class="warning-box">
                <h3>‚ö†Ô∏è Errores t√≠picos con JSON:</h3>
                <ul>
                    <li>‚ùå Usar comillas simples en lugar de dobles</li>
                    <li>‚ùå Comas extra al final</li>
                    <li>‚ùå Funciones no se convierten a JSON</li>
                    <li>‚ùå undefined se pierde en la conversi√≥n</li>
                </ul>
            </div>

            <div class="demo-controls">
                <button class="btn btn-danger" onclick="demo5()">üö® Ver Errores Comunes</button>
            </div>

            <div class="console-output" id="output5">Presiona el bot√≥n para ver los errores...</div>
        </div>

        <!-- GU√çA R√ÅPIDA -->
        <div class="demo-section">
            <h2>üß≠ Gu√≠a R√°pida: JSON</h2>
            
            <div class="highlight-box">
                <h3>‚úÖ Cu√°ndo usar JSON:</h3>
                <ul>
                    <li>üåê <strong>APIs:</strong> Recibir datos del clima, noticias, etc.</li>
                    <li>üíæ <strong>Guardar datos:</strong> Configuraci√≥n, preferencias</li>
                    <li>üìÇ <strong>Archivos:</strong> Informaci√≥n del proyecto</li>
                    <li>üîÑ <strong>Comunicaci√≥n:</strong> Frontend ‚Üî Backend</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>üéØ En tu proyecto usar√°s JSON para:</h3>
                <ul>
                    <li>üìù Datos del portfolio (proyectos, skills, info personal)</li>
                    <li>‚öôÔ∏è Configuraci√≥n del sitio (colores, navegaci√≥n)</li>
                    <li>üìä Estad√≠sticas (n√∫mero de proyectos, tecnolog√≠as)</li>
                    <li>üåê APIs externas (GitHub repos, datos de contacto)</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Demo 1: Diferencia entre JS y JSON
        function demo1() {
            const output = document.getElementById('output1');
            
            // Objeto JavaScript
            const usuario = {
                nombre: "Ana",
                edad: 25,
                activo: true,
                skills: ["HTML", "CSS", "JS"]
            };
            
            // Convertir a JSON
            const usuarioJSON = JSON.stringify(usuario, null, 2);
            
            let mensaje = "";
            mensaje += "=== OBJETO JAVASCRIPT ===\n";
            mensaje += "Tipo: " + typeof usuario + "\n";
            mensaje += "Nombre: " + usuario.nombre + "\n";
            mensaje += "Skills: " + usuario.skills.join(", ") + "\n";
            mensaje += "\n=== TEXTO JSON ===\n";
            mensaje += "Tipo: " + typeof usuarioJSON + "\n";
            mensaje += "Es texto que se puede:\n";
            mensaje += "‚Ä¢ Enviar por internet ‚úÖ\n";
            mensaje += "‚Ä¢ Guardar en archivos ‚úÖ\n";
            mensaje += "‚Ä¢ Usar en APIs ‚úÖ\n";
            
            output.textContent = mensaje;
        }

        // Demo 2: JSON.stringify()
        function demo2() {
            const output = document.getElementById('output2');
            const jsonDisplay = document.getElementById('json2');
            
            const producto = {
                nombre: "Laptop",
                precio: 1200,
                disponible: true,
                categoria: "tecnologia"
            };
            
            const productoJSON = JSON.stringify(producto, null, 2);
            
            let mensaje = "";
            mensaje += "=== JSON.stringify() ===\n";
            mensaje += "Objeto original: " + typeof producto + "\n";
            mensaje += "JSON resultado: " + typeof productoJSON + "\n";
            mensaje += "Caracteres: " + productoJSON.length + "\n";
            mensaje += "\nJSON generado (ver abajo):\n";
            
            output.textContent = mensaje;
            jsonDisplay.textContent = productoJSON;
        }

        // Demo 3: JSON.parse()
        function demo3() {
            const output = document.getElementById('output3');
            
            const climaTexto = `{
    "ciudad": "Buenos Aires",
    "temperatura": 25,
    "clima": "soleado",
    "pronostico": ["soleado", "nublado", "lluvia"]
}`;
            
            const clima = JSON.parse(climaTexto);
            
            let mensaje = "";
            mensaje += "=== JSON.parse() ===\n";
            mensaje += "Texto original: " + typeof climaTexto + "\n";
            mensaje += "Objeto resultado: " + typeof clima + "\n";
            mensaje += "\nDatos parseados:\n";
            mensaje += "Ciudad: " + clima.ciudad + "\n";
            mensaje += "Temperatura: " + clima.temperatura + "¬∞C\n";
            mensaje += "Clima: " + clima.clima + "\n";
            mensaje += "Pr√≥ximos d√≠as: " + clima.pronostico.join(" ‚Üí ") + "\n";
            
            output.textContent = mensaje;
        }

        // Demo 4: Casos pr√°cticos
        function demo4() {
            const output = document.getElementById('output4');
            
            const perfil = {
                nombre: "Ana Garc√≠a",
                profesion: "Desarrolladora Frontend",
                skills: ["HTML", "CSS", "JavaScript", "React"],
                proyectos: [
                    { nombre: "Portfolio", completado: true },
                    { nombre: "Blog", completado: false },
                    { nombre: "E-commerce", completado: true }
                ],
                contacto: {
                    email: "ana@email.com",
                    linkedin: "linkedin.com/in/ana"
                }
            };
            
            const perfilJSON = JSON.stringify(perfil, null, 2);
            const completados = perfil.proyectos.filter(p => p.completado).length;
            
            let mensaje = "";
            mensaje += "=== PERFIL DE USUARIO ===\n";
            mensaje += "Nombre: " + perfil.nombre + "\n";
            mensaje += "Skills: " + perfil.skills.join(", ") + "\n";
            mensaje += "Proyectos completados: " + completados + "/" + perfil.proyectos.length + "\n";
            mensaje += "Email: " + perfil.contacto.email + "\n";
            mensaje += "\n=== CONVERTIDO A JSON ===\n";
            mensaje += "Caracteres: " + perfilJSON.length + "\n";
            mensaje += "Listo para:\n";
            mensaje += "‚Ä¢ Guardar en archivo ‚úÖ\n";
            mensaje += "‚Ä¢ Enviar a API ‚úÖ\n";
            mensaje += "‚Ä¢ Usar en localStorage ‚úÖ\n";
            
            output.textContent = mensaje;
        }

        // Demo 5: Errores comunes
        function demo5() {
            const output = document.getElementById('output5');
            
            let mensaje = "";
            mensaje += "=== ERROR 1: JSON mal formateado ===\n";
            
            const malJSON = `{
    nombre: "Ana",
    'edad': 25,
    activo: true,
}`;
            
            try {
                JSON.parse(malJSON);
                mensaje += "‚úÖ √âxito (no deber√≠a llegar aqu√≠)\n";
            } catch (error) {
                mensaje += "‚ùå Error: " + error.message + "\n";
            }
            
            mensaje += "\n=== ERROR 2: Tipos no soportados ===\n";
            
            const objetoComplejo = {
                nombre: "Ana",
                edad: 25,
                saludar: function() { return "Hola"; },
                datos: undefined,
                vacio: null
            };
            
            const json = JSON.stringify(objetoComplejo, null, 2);
            const recuperado = JSON.parse(json);
            
            mensaje += "Original ten√≠a:\n";
            mensaje += "‚Ä¢ nombre: " + typeof objetoComplejo.nombre + " ‚úÖ\n";
            mensaje += "‚Ä¢ edad: " + typeof objetoComplejo.edad + " ‚úÖ\n";
            mensaje += "‚Ä¢ saludar: " + typeof objetoComplejo.saludar + " ‚ùå\n";
            mensaje += "‚Ä¢ datos: " + typeof objetoComplejo.datos + " ‚ùå\n";
            mensaje += "‚Ä¢ vacio: " + typeof objetoComplejo.vacio + " ‚úÖ\n";
            mensaje += "\nDespu√©s de JSON:\n";
            mensaje += "‚Ä¢ nombre: " + typeof recuperado.nombre + " ‚úÖ\n";
            mensaje += "‚Ä¢ edad: " + typeof recuperado.edad + " ‚úÖ\n";
            mensaje += "‚Ä¢ saludar: " + typeof recuperado.saludar + " ‚ùå (perdida)\n";
            mensaje += "‚Ä¢ datos: " + typeof recuperado.datos + " ‚ùå (perdida)\n";
            mensaje += "‚Ä¢ vacio: " + typeof recuperado.vacio + " ‚úÖ\n";
            
            output.textContent = mensaje;
        }

        // Inicializaci√≥n
        window.addEventListener('load', function() {
            console.log('üìÑ Ejemplo 4: JSON cargado correctamente');
            
            setTimeout(() => {
                const output1 = document.getElementById('output1');
                if (output1.textContent === 'Presiona el bot√≥n para ver el resultado...') {
                    output1.textContent = 'üëÜ Presiona el bot√≥n para comenzar\n\nüí° JSON es fundamental para:\n‚Ä¢ APIs y comunicaci√≥n web\n‚Ä¢ Guardar y cargar datos\n‚Ä¢ Intercambio entre aplicaciones';
                }
            }, 1000);
        });
    </script>
</body>
</html>